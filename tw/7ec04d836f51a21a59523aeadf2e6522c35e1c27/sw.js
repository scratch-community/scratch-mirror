// These will be replaced at build-time by generate-service-worker-plugin.js
const HTML_ASSETS = ["editor.html","index.html","fullscreen.html","addons.html"];
const LAZY_ASSETS = ["static/assets/b631383707e87a454b479dedaa8ca014.svg","static/assets/ef4a998a82a8567de018baa4607bc6a0.svg","static/assets/00aa0c4320b93631ab3c223604ead431.svg","static/assets/a11919e102077f40302da55fb9150440.svg","static/assets/48df3abff5e8eb9a597f355daaf5348c.png","static/assets/7d043362c1c4cabd22aeb93b43fc5fc6.svg","static/assets/40167d33efb7d0929a3bcbc591fc78b0.svg","static/assets/86f568a0ecc0badac2c4952b39fff148.svg","static/assets/78e3f697df85275aa8d384ca6fc0e288.svg","static/assets/b3a6f3783f393f641dc3e51211dd50f4.svg","static/assets/5b36d8cf15d803226e2fe4c0737be43f.svg","static/assets/c216c70ef78cc80a1538a3accc6612af.svg","static/assets/679ce05ac8c35bbf83f596e895ab711b.svg","static/assets/9c604018c786598c0f198af5e798cd16.png","static/assets/8969372a821bd2a0170ed9a68a3e238d.png","static/assets/6e51f9cfc9bfca2f4fb88d1fe1ec2615.png","static/assets/37954fe300d44f8765b6d48b2836fcf5.png","static/assets/c6ab79fc9e76cb500fc83b6f1c6437d0.png","static/assets/ff69eb6d9e2044232f0187954982fb3c.png","static/assets/64e4a905e7c3ab32ef03272631c3df75.png","static/assets/db18366b02c46fdf9033c9a4a13f911b.png","static/assets/d1f14e4e1372d8f9c0908d2f45aa5b54.svg","static/assets/76024aad6524bdf0e8d438f4d024e581.png","static/assets/e6e16daaf665399c8826497dfb888260.svg","static/assets/9d5be1463602fd5ac397d01e8a436eb2.png","static/assets/831a9fd5f488f356a5031c289e4c35fe.svg","static/assets/9c0ac6e5681567da6d6f6004ba107658.svg","static/assets/8505df165b778979791da5caaee96fea.png","static/assets/c3a88fa1746d8e5169db188302979317.svg","static/assets/7bd83c9ad44bff4a20f0c19726adf8be.svg","static/assets/c73619fea5bb43c53a080399a35273be.png","static/assets/adc0b35e696de431abb9dd3ea90a5deb.svg","static/assets/296357261fb7d74c06765aadb0ff1026.svg","static/assets/cf07199bb768b01e6ac2a5c68fd8c3bb.svg","static/assets/89833a109ba5105c76ee1fb007d6811b.svg","static/assets/bf550f4c2ff75abf5d2d76e87470af92.svg","static/assets/589eaf6a247df5343b584fd0fa848489.svg","static/assets/cee477fa706ab6fe733a65edd475c41b.svg","static/assets/3e6a0a68ee1872bee1f93e4428bcb993.svg","static/assets/ed3fe9e11706e76990709ac2e567ada6.svg","static/assets/79a644579518611a7b397f85a32cfb85.svg","static/assets/e91530fe8f85b7fdc983b48ab3b9885d.svg","static/assets/2501d1b87cf04e00cc3a623fa8b5d95c.svg","static/assets/d1f6af6170e0178514f35fedc62e5eab.svg","static/assets/bc0fbf502b38884f440135ddae40016d.svg","static/assets/f6d9f33ec366a89a58b3cf0e125adf97.svg","static/assets/165746cd277a144ddefd62ac5d67b696.svg","static/assets/7d2d28d80d4ae06acb4fdbde429448e6.svg","static/assets/f9a0fb45ee35279e05b6f4e637509777.svg","static/assets/af8e46c9477a8cadeb6c26b4686407a5.svg","static/assets/b1f026ce265c0f666e2063ef94b06109.svg","static/assets/85f62e9e77bed58778782e6cce58c1f4.svg","static/assets/32d903cafc72328bd30afce14bfa4c79.svg","static/assets/c14c0c1e852949eff4e6c069772b0015.svg","static/assets/61e99f0da6828d62aa9e3761c15ace9f.svg","static/assets/a72a652fdc84dc6983d3cc9596c36a26.svg","static/assets/566d73a090e3d42d5bdfee3d92c79d25.svg","static/assets/674db5c2e49df884273ac0f7d221865c.svg","static/assets/7efe82fffae735cd083388badd51b3fa.svg","static/assets/1900166faa9222d0d10c568a12c848a5.png","static/assets/7c410b6c3cd2a9ee41505c5c6951bbf6.png","static/assets/64e66a9dcf4b42a699f49e5973a4a62e.svg","static/assets/e4dfc45f34b4606356c4c70ba14a96f0.svg","static/assets/3c06b74c80d1e6b1d210ca86c87cd326.svg","static/assets/7c67e2601425784a243cd7e0f15c50a3.svg","static/assets/945297ca77c041c98377f204e1af772e.svg","static/assets/82072226e8cf716289165650c31eeda2.svg","static/assets/98bfc66ce081a3750f3b59ab67d0ac75.svg","static/assets/306ffbcffad0d931fb1d158dd812f3fe.svg","static/assets/3a296d85c85a5f222663dad932737c86.svg","static/assets/65715c37a18debd4b44a80c478a3abd7.svg","static/assets/223d68e7b8769bac1f33291514ce5bac.svg","static/assets/7ad5cc6ed3d0a5fd6a273078fe3999f0.svg","static/assets/cd200d8b59d5c3d4ff3a69a774f5fac3.svg","static/assets/d259fcbecaa9d2a22d19848daff9d4c6.svg","static/assets/344dc88f4d5187f0d86f2f13c9ef1727.mp3","static/assets/311ef566eba52b1729fd02d8944b4378.mp3","static/assets/1bff35b71e6f52017b123be4f9904d54.mp3","static/assets/b74faacb619dad0b5f3871a04a6bcd0e.mp3","static/assets/c40ccf288c211a9441bb714db775d334.mp3","static/assets/2291f2138819385c9a5750130f254f90.mp3","static/assets/484c379b1da007ecb5f66780a119fa2e.mp3","static/assets/1c9099a7cf1c142492de1603b20b0d44.mp3","static/assets/e75c65e1679e0cc2800caa5c47823daa.mp3","static/assets/fefb7e2fcd4d311a5a7c3de5a8ae5b64.mp3","static/assets/a42b5a072afdc2d1aa55accfb1168fb3.mp3","static/assets/26a4aecd5158e8663b90d5edfba5e25a.mp3","static/assets/352dc6cd98d372680a5297f6ffc50ec4.mp3","static/assets/fcb21f71cf289f827e01b18b7c3fdc85.mp3","static/assets/367d7189e8dac8a0ca2828830a91db83.mp3","static/assets/dd8f636a1df01f3d3768998081387ea4.mp3","static/assets/06fd0604a4bf62a2b706edc23e49a086.mp3","static/assets/52ac58d8ef4e53d6449e592b68359d46.mp3","static/assets/af0caec5f8ac3a35c9769e1e07918e14.mp3","static/assets/579529cc3c40887f6ecc771c4b39809d.mp3","static/assets/048d12d9e01a42ab48fb6ce57100f6f8.mp3","static/assets/41ebcde49032d543af1a2c843a725834.mp3","static/assets/c5b3d36982acf8f9acc53c3964100460.mp3","static/assets/7231a404390e5fe96856a5ec5182745c.mp3","static/assets/c20d558f1fc823a96de910456827d90c.mp3","static/assets/6d912e9240790715a077d422cdbc19a5.mp3","static/assets/b2b4ad5307e24c6627f2077478017981.mp3","static/assets/ecea3eba4a9e187eb6cc7cc6a6b4bb4d.mp3","static/assets/a16ff5830a119789f5bc5d29a42ace64.mp3","static/assets/7cf82cd9bd601cfee5e715c0eb5343ef.mp3","static/assets/bd1e18eb36346861c5c57be8ed2ba5e3.mp3","static/assets/23d5956ad3641d4663a17353c71477b0.mp3","static/assets/f44e9579ce45c384ed76054ee5e98270.mp3","static/assets/32e0021542e34f09a747322d11868f23.mp3","static/assets/1c8b575f37b1a519fc3cdc5183bb85c0.mp3","static/assets/a9eccab64d64a3114344d56af142741e.mp3","static/assets/1ac03a53ecc806b652579f9f8da7c58a.mp3","static/assets/3299cad6fda8c0a3d957a5ea75060677.mp3","static/assets/bf99fbafe9a01e45da63a6874cd8f4b2.mp3","static/assets/2bae7059d4f81f344b02cc34567e548d.mp3","static/assets/d4708e8517c8e85b5c1948c845e662ba.mp3","static/assets/4734f3fe917e80ae53b9f1f4e3d62147.mp3","static/assets/96d18383c71ad5ceff1152859b46c508.mp3","static/assets/b5f8889e91e6d51fc294dfd1125c1240.mp3","static/assets/8589d7e6689f31ec2c251be25ac95c1b.mp3","static/assets/2ec048ddd7a7e30b94f8d24c22892112.mp3","static/assets/527756fb4ee6a19086a69e0ea8355b5c.mp3","static/assets/f151dc9a8eb14b4d9c64795e1cbae7e0.mp3","static/assets/3d55b957c09e11fe0d75f4f2a84bdf53.mp3","static/assets/e3af35844a01f8f64d2bea326db21a35.mp3","static/assets/52d442dc8e71307ec251603d1edd35f0.mp3","static/assets/5610fba29744cce750f1da6c6091ecac.mp3","static/assets/19161c89a6ca04006606ca3f4f91fdec.mp3","static/assets/2352f743e6b883d53e0b09b84ddea79b.mp3","static/assets/9d76e4ccf26072c4bddaa81a765ab08a.mp3","static/assets/25c294b62fe9e614db125a4f65cc6044.mp3","static/assets/a386a58fa9c00de141c32b5b11e5327e.mp3","static/assets/912e19a8fe314f46ab3df3fed9578a29.mp3","static/assets/2613dd347943b2ed7c6edb22e0cf7e0a.mp3","static/assets/0fbf0f28b13c0f6395c23facb7c7bb34.ttf","static/assets/df1cdbb7886c4a3faed089d2a4661935.otf","static/assets/ccb0bda27bef3666a5b4e209b2e95fe8.ttf","static/assets/1e42fb0552204ffda375eaf9779df330.ttf","static/assets/1e9845b965f84b5719b7232a81fefc84.ttf","static/assets/1157205071ed65c811dbb73fb4a01305.ttf","static/assets/bc97443df1d87914d75725d53a1e8eae.ttf","static/assets/7808d3b49fdf33cb82e053f00a27ba33.png","static/assets/93babda8f98fc8009c28e97f1f118b6f.png","js/vendors~addon-settings~credits~editor~embed~fullscreen~player.e602710e5d2d7abd4644.js","js/addon-settings~addons~editor~fullscreen~player.0dd8c4ec09970bcbf4dd.js","js/editor~embed~fullscreen~player.9c99c216549b8f902175.js","js/vendors~editor~embed~fullscreen~player.e7f775315ba58f343c72.js","js/addon-default-entry.2f89c7bdbcf814c83465.js","js/addon-entry-2d-color-picker.8f8fb4d8ed92c8557edc.js","js/addon-entry-better-img-uploads.d5c83ebd22b536063a58.js","js/addon-entry-block-count.2e9c97d5edf71a0b52b1.js","js/addon-entry-block-palette-icons.e2b18a2e7922da24b405.js","js/addon-entry-blocks2image.05504a5faa2427bf0776.js","js/addon-entry-cat-blocks.893998361763a2a64378.js","js/addon-entry-clones.ee669d843b81dbd43be5.js","js/addon-entry-columns.3649289b0c42c3527724.js","js/addon-entry-copy-reporter.ea0081f561eff34eb6a3.js","js/addon-entry-custom-block-shape.944504242a28e611160f.js","js/addon-entry-custom-block-text.5cd3e71d5f3abe885952.js","js/addon-entry-custom-zoom.27581d94eb36512981f3.js","js/addon-entry-data-category-tweaks-v2.10ba75e0ac9e0e6846f3.js","js/addon-entry-debugger.9cb195355b0a0d67d6c9.js","js/addon-entry-default-costume-editor-color.38fe40b622c765e1bb2a.js","js/addon-entry-disable-paste-offset.36c6406192b7d9f32587.js","js/addon-entry-disable-stage-drag-select.4c6d1f3aa6187c43fdc8.js","js/addon-entry-editor-buttons-reverse-order.b7ce3ffe4e32db39ea12.js","js/addon-entry-editor-colored-context-menus.098c8ccc09c19e4b1189.js","js/addon-entry-editor-compact.3580d3e80ee240f389a7.js","js/addon-entry-editor-extra-keys.4dc0fb27bd0716aaa513.js","js/addon-entry-editor-number-arrow-keys.580d3a69f308e0d8ad66.js","js/addon-entry-editor-sounds.8f1a758e0aa85cbece3e.js","js/addon-entry-editor-square-inputs.c3b6e8713de3e124fa09.js","js/addon-entry-editor-stage-left.7802edcb1058f9150362.js","js/addon-entry-editor-stepping.abc92a5dff2b1ad13f2f.js","js/addon-entry-editor-theme3.fc865d1fecde3ff728c7.js","js/addon-entry-fullscreen.b66a8b82e4d73785bd75.js","js/addon-entry-gamepad.e8dcf3b781f7ecfdaee5.js","js/addon-entry-hide-delete-button.bd861847cd52832ec6a4.js","js/addon-entry-hide-flyout.5e41de9564aef56aba13.js","js/addon-entry-hide-new-variables.f19fe000a13cd6730997.js","js/addon-entry-hide-stage.4934309c8dea381c0e63.js","js/addon-entry-initialise-sprite-position.32dde2c7635c89440814.js","js/addon-entry-load-extensions.3e6739fed3409a45f31f.js","js/addon-entry-mediarecorder.0c727eef88fca3da128f.js","js/addon-entry-mouse-pos.67593f48cc0f8b4c43c6.js","js/addon-entry-move-to-top-layer.26072723e245c3ba26fa.js","js/addon-entry-no-script-bumping.82ba18ab0dfa2e001167.js","js/addon-entry-number-pad.c8f886e1df328c3b14a6.js","js/addon-entry-paint-by-default.e2a730947e46c17f20a9.js","js/addon-entry-paint-snap.0c34e9b4817b02c2f2d6.js","js/addon-entry-remove-curved-stage-border.2745cdde64e8df9f872a.js","js/addon-entry-remove-sprite-confirm.accff7263cb41e6e8a7f.js","js/addon-entry-script-snap.e64101842dcef98647a0.js","js/addon-entry-search-sprites.e492b780ed881e939329.js","js/addon-entry-sprite-properties.3069bb1d17b1a73dfb16.js","js/addon-entry-swap-local-global.e6f58ad6312552b3cfb8.js","js/addon-entry-transparent-orphans.53cc8f52e3c164ee92f6.js","js/addon-entry-tw-disable-cloud-variables.8c7b8272b7e3431c00bf.js","js/addon-entry-tw-disable-compiler.c044e95fa5578680246e.js","js/addon-entry-tw-remove-backpack.7e8afc766189e3692a4c.js","js/addon-entry-tw-remove-feedback.1435f685f4097c21c569.js","js/addon-entry-tw-straighten-comments.a9615afb78606f733b2c.js","js/addon-entry-variable-manager.820d9d88494ee8547025.js","js/addon-entry-vol-slider.96179817a84f0ca104a7.js","js/addon-entry-zebra-striping.d81a48f648b17206970c.js","js/addon-l10n-de.6648eedd5c79b130586e.js","js/addon-l10n-es.9162a76127cd78632208.js","js/addon-l10n-fi.ceec068d78be534b07a7.js","js/addon-l10n-fr.f4bdbb54922b34996e1b.js","js/addon-l10n-hu.677e1e028b9dae3a08e4.js","js/addon-l10n-it.4c1092dde0913fab35f6.js","js/addon-l10n-ja.1d2a91846fb4238536fa.js","js/addon-l10n-ko.33d684171387440356be.js","js/addon-l10n-nl.6a88fc5e5a8ab9dd403a.js","js/addon-l10n-pl.9b42c25c3cc78630910a.js","js/addon-l10n-pt.9bc6675100647624caac.js","js/addon-l10n-ro.f73baff5aa0202d644ac.js","js/addon-l10n-ru.e40cfd4120c8c3ce08e1.js","js/addon-l10n-sl.2fd8ade3bf3b0b79a044.js","js/addon-l10n-tr.72694a4b62491f698d40.js","js/addon-l10n-zh-tw.96bf5d262ff8236d5573.js","js/addon-settings.e223dffd708ba0f2c794.js","js/addons.526fcdca83816c8f5eed.js","js/editor.5a69bd2df23754f951fb.js","js/fullscreen.ff4fc61d6d031b43374a.js","js/player.0d7d73ae6155de0b1c12.js","js/sb.d4507d9bd076d6af368d.js","static/blocks-media/default/click.mp3","static/blocks-media/default/click.ogg","static/blocks-media/default/click.wav","static/blocks-media/default/comment-arrow-down.svg","static/blocks-media/default/comment-arrow-up.svg","static/blocks-media/default/delete-x.svg","static/blocks-media/default/delete.mp3","static/blocks-media/default/delete.ogg","static/blocks-media/default/delete.wav","static/blocks-media/default/dropdown-arrow-dark.svg","static/blocks-media/default/dropdown-arrow.svg","static/blocks-media/default/eyedropper.svg","static/blocks-media/default/green-flag.svg","static/blocks-media/default/handclosed.cur","static/blocks-media/default/handdelete.cur","static/blocks-media/default/handopen.cur","static/blocks-media/default/repeat.svg","static/blocks-media/default/rotate-left.svg","static/blocks-media/default/rotate-right.svg","static/blocks-media/default/sprites.png","static/blocks-media/default/status-not-ready.svg","static/blocks-media/default/status-ready.svg","static/blocks-media/default/zoom-in.svg","static/blocks-media/default/zoom-out.svg","static/blocks-media/default/zoom-reset.svg","static/blocks-media/default/extensions/music-block-icon.svg","static/blocks-media/default/extensions/pen-block-icon.svg","static/blocks-media/default/icons/arrow.svg","static/blocks-media/default/icons/arrow_button.svg","static/blocks-media/default/icons/control_forever.svg","static/blocks-media/default/icons/control_repeat.svg","static/blocks-media/default/icons/control_stop.svg","static/blocks-media/default/icons/control_wait.svg","static/blocks-media/default/icons/remove.svg","static/blocks-media/high-contrast/click.mp3","static/blocks-media/high-contrast/click.ogg","static/blocks-media/high-contrast/click.wav","static/blocks-media/high-contrast/comment-arrow-down.svg","static/blocks-media/high-contrast/comment-arrow-up.svg","static/blocks-media/high-contrast/delete-x.svg","static/blocks-media/high-contrast/delete.mp3","static/blocks-media/high-contrast/delete.ogg","static/blocks-media/high-contrast/delete.wav","static/blocks-media/high-contrast/dropdown-arrow-dark.svg","static/blocks-media/high-contrast/dropdown-arrow.svg","static/blocks-media/high-contrast/eyedropper.svg","static/blocks-media/high-contrast/green-flag.svg","static/blocks-media/high-contrast/handclosed.cur","static/blocks-media/high-contrast/handdelete.cur","static/blocks-media/high-contrast/handopen.cur","static/blocks-media/high-contrast/repeat.svg","static/blocks-media/high-contrast/rotate-left.svg","static/blocks-media/high-contrast/rotate-right.svg","static/blocks-media/high-contrast/sprites.png","static/blocks-media/high-contrast/status-not-ready.svg","static/blocks-media/high-contrast/status-ready.svg","static/blocks-media/high-contrast/zoom-in.svg","static/blocks-media/high-contrast/zoom-out.svg","static/blocks-media/high-contrast/zoom-reset.svg","static/blocks-media/high-contrast/extensions/music-block-icon.svg","static/blocks-media/high-contrast/extensions/pen-block-icon.svg","static/blocks-media/high-contrast/icons/arrow.svg","static/blocks-media/high-contrast/icons/arrow_button.svg","static/blocks-media/high-contrast/icons/control_forever.svg","static/blocks-media/high-contrast/icons/control_repeat.svg","static/blocks-media/high-contrast/icons/control_stop.svg","static/blocks-media/high-contrast/icons/control_wait.svg","static/blocks-media/high-contrast/icons/remove.svg"];
const LAZY_ASSETS_NAME = "tw-lazy-bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f";

const knownCaches = [
    LAZY_ASSETS_NAME
];
const base = location.pathname.substr(0, location.pathname.indexOf('sw.js'));

self.addEventListener('install', event => {
    self.skipWaiting();
    event.waitUntil(caches.open(LAZY_ASSETS_NAME).then(cache => cache.addAll(HTML_ASSETS)));
});

self.addEventListener('activate', event => {
    event.waitUntil(
        caches.keys().then(keys => Promise.all(keys.filter(i => !knownCaches.includes(i)).map(i => caches.delete(i))))
    );
});

self.addEventListener('fetch', event => {
    const url = new URL(event.request.url);
    if (url.origin !== location.origin) return;
    if (event.request.method !== 'GET') return;

    let relativePathname = url.pathname.substr(base.length);
    if (/^(\d+\/?)?$/.test(relativePathname)) {
        relativePathname = 'index.html';
    } else if (/^(\d+\/)?editor\/?$/i.test(relativePathname)) {
        relativePathname = 'editor.html';
    } else if (/^(\d+\/)?fullscreen\/?$/i.test(relativePathname)) {
        relativePathname = 'fullscreen.html';
    } else if (/^addons\/?$/i.test(relativePathname)) {
        relativePathname = 'addons.html';
    }

    if (HTML_ASSETS.includes(relativePathname)) {
        event.respondWith(
            fetch(event.request).catch(() => caches.match(new Request(relativePathname)))
        );
    } else if (LAZY_ASSETS.includes(relativePathname)) {
        event.respondWith(
            caches.open(LAZY_ASSETS_NAME).then(cache => cache.match(new Request(relativePathname)).then(response => (
                response || fetch(event.request).then(networkResponse => {
                    cache.put(event.request, networkResponse.clone());
                    return networkResponse;
                })
            )))
        );
    }
});
